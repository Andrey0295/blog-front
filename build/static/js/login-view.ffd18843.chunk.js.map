{"version":3,"sources":["views/LoginView.js"],"names":["SignupSchema","Yup","shape","email","required","password","LoginView","state","handleChange","target","name","value","setState","handleSubmit","e","onLogin","props","preventDefault","onInputFocus","isError","resetError","this","className","role","initialValues","validationSchema","errors","touched","onSubmit","type","onChange","onFocus","placeholder","minLength","Component","connect","authSelectors","getErrorData","dispatch","data","authOperations","login","authAction"],"mappings":"gOAUMA,EAAeC,MAAaC,MAAM,CACtCC,MAAOF,MAAaE,MAAM,iBAAiBC,SAAS,YACpDC,SAAUJ,MAAaE,MAAM,oBAAoBC,SAAS,cAGtDE,E,4MACJC,MAAQ,CACNJ,MAAO,GACPE,SAAU,I,EAUZG,aAAe,YAAkC,IAAD,IAA9BC,OAAUC,EAAoB,EAApBA,KAAMC,EAAc,EAAdA,MAChC,EAAKC,SAAL,eAAiBF,EAAOC,K,EAG1BE,aAAe,SAAAC,GACb,IAAQC,EAAY,EAAKC,MAAjBD,QACRD,EAAEG,iBAEFF,EAAQ,EAAKR,OAEb,EAAKK,SAAS,CAAEF,KAAM,GAAIP,MAAO,GAAIE,SAAU,M,EAGjDa,aAAe,WACb,MAAgC,EAAKF,MAA7BG,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,WACbD,GACFC,K,0DAvBJ,WACE,MAAgCC,KAAKL,MAA7BG,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,WACbD,GACFC,M,oBAwBJ,WAAU,IAAD,OACCD,EAAYE,KAAKL,MAAjBG,QACR,EAA4BE,KAAKd,MAAzBJ,EAAR,EAAQA,MAAOE,EAAf,EAAeA,SACf,OACE,gCACE,4CAECc,GACC,qBAAKG,UAAU,qBAAqBC,KAAK,QAAzC,SACGJ,IAIL,cAAC,IAAD,CACEK,cAAe,CACbrB,MAAO,GACPE,SAAU,IAEZoB,iBAAkBzB,EALpB,SAOG,gBAAG0B,EAAH,EAAGA,OAAH,EAAWC,QAAX,OACC,eAAC,IAAD,CAAMC,SAAU,EAAKf,aAArB,UACE,qBAAKS,UAAU,oBAAf,SACE,wBAAOA,UAAU,aAAjB,kBAEE,cAAC,IAAD,CACEZ,KAAK,QACLmB,KAAK,QACLlB,MAAOR,EACP2B,SAAU,EAAKtB,aACfuB,QAAS,EAAKb,aACdI,UAAU,eACVU,YAAY,qBAEH,KAAV7B,EACC,8BACE,mBAAGmB,UAAU,eAAb,SAA6BI,EAAOvB,UAEpC,UAGR,qBAAKmB,UAAU,oBAAf,SACE,wBAAOA,UAAU,aAAjB,qBAEE,cAAC,IAAD,CACEZ,KAAK,WACLmB,KAAK,WACLlB,MAAON,EACP0B,QAAS,EAAKb,aACdY,SAAU,EAAKtB,aACfc,UAAU,eACVU,YAAY,mCACZC,UAAU,MAEE,KAAb5B,EACC,8BACE,mBAAGiB,UAAU,eAAb,SAA6BI,EAAOrB,aAEpC,UAGR,wBAAQwB,KAAK,SAASP,UAAU,4BAAhC,gC,GA9FUY,aAkHTC,uBATS,SAAA5B,GAAK,MAAK,CAChCY,QAASiB,IAAcC,aAAa9B,OAGX,SAAA+B,GAAQ,MAAK,CACtCvB,QAAS,SAAAwB,GAAI,OAAID,EAASE,IAAeC,MAAMF,KAC/CnB,WAAY,kBAAMkB,EAASI,IAAWtB,kBAGzBe,CAA6C7B","file":"static/js/login-view.ffd18843.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport { Formik, Form, Field } from 'formik';\nimport * as Yup from 'yup';\n\nimport authOperations from '../redux/auth/auth-operations';\nimport authSelectors from '../redux/auth/auth-selectors';\nimport authAction from '../redux/auth/auth-action';\n\nconst SignupSchema = Yup.object().shape({\n  email: Yup.string().email('Invalid email').required('Required'),\n  password: Yup.string().email('Invalid password').required('Required'),\n});\n\nclass LoginView extends Component {\n  state = {\n    email: '',\n    password: '',\n  };\n\n  componentWillUnmount() {\n    const { isError, resetError } = this.props;\n    if (isError) {\n      resetError();\n    }\n  }\n\n  handleChange = ({ target: { name, value } }) => {\n    this.setState({ [name]: value });\n  };\n\n  handleSubmit = e => {\n    const { onLogin } = this.props;\n    e.preventDefault();\n\n    onLogin(this.state);\n\n    this.setState({ name: '', email: '', password: '' });\n  };\n\n  onInputFocus = () => {\n    const { isError, resetError } = this.props;\n    if (isError) {\n      resetError();\n    }\n  };\n\n  render() {\n    const { isError } = this.props;\n    const { email, password } = this.state;\n    return (\n      <div>\n        <h1>Login page</h1>\n\n        {isError && (\n          <div className=\"alert alert-danger\" role=\"alert\">\n            {isError}\n          </div>\n        )}\n\n        <Formik\n          initialValues={{\n            email: '',\n            password: '',\n          }}\n          validationSchema={SignupSchema}\n        >\n          {({ errors, touched }) => (\n            <Form onSubmit={this.handleSubmit}>\n              <div className=\"form-outline mb-4\">\n                <label className=\"form-label\">\n                  Email\n                  <Field\n                    name=\"email\"\n                    type=\"email\"\n                    value={email}\n                    onChange={this.handleChange}\n                    onFocus={this.onInputFocus}\n                    className=\"form-control\"\n                    placeholder=\"Enter your email\"\n                  />\n                  {email === '' ? (\n                    <div>\n                      <p className=\"text-danger \">{errors.email}</p>\n                    </div>\n                  ) : null}\n                </label>\n              </div>\n              <div className=\"form-outline mb-4\">\n                <label className=\"form-label\">\n                  Password\n                  <Field\n                    name=\"password\"\n                    type=\"password\"\n                    value={password}\n                    onFocus={this.onInputFocus}\n                    onChange={this.handleChange}\n                    className=\"form-control\"\n                    placeholder=\"Enter password (at least 6 symb)\"\n                    minLength=\"6\"\n                  />\n                  {password === '' ? (\n                    <div>\n                      <p className=\"text-danger \">{errors.password}</p>\n                    </div>\n                  ) : null}\n                </label>\n              </div>\n              <button type=\"submit\" className=\"btn btn-primary btn-block\">\n                Login\n              </button>\n            </Form>\n          )}\n        </Formik>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  isError: authSelectors.getErrorData(state),\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onLogin: data => dispatch(authOperations.login(data)),\n  resetError: () => dispatch(authAction.resetError()),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginView);\n"],"sourceRoot":""}